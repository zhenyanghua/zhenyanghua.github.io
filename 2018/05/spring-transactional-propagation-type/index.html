<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Zhenyang Hua</title>
  <link rel="stylesheet" href="/assets/global.374079e1.css">
<link rel="stylesheet" href="/assets/style.module.184703f0.css"></head>
<body><div id="contentcontainer" class="shadow"><div class="host_1vq48fc" style="background-color: rgb(221, 251, 152);"><header><div class="host_1q8y6om"><a href="#maincontent">skip to main content</a></div><div class="host_216t9o"><h2 class="title_216t9o"><a href="/">Zhenyang Hua</a></h2></div><div class="host_m2uvri"><nav><h2 class="hidden">Main Navigation</h2><ul><li><a href="/" class="link_m2uvri">Tools</a></li><li><a href="/writings/1" class="link_m2uvri">Writings</a></li></ul></nav></div><div class="host_1c336ft"><span>This is a space that holds a collection of my personal work and ideas</span></div></header></div><main id="maincontent"><div class="post_14b9dxr"><h1 class="title_14b9dxr">Spring @Transactional - Propagation Type</h1><p class="date_14b9dxr">Posted on 05/08/2018</p><div class="summary_14b9dxr"><p>Spring <code>@Transactional</code> annotation is concise and powerful. To understand what&#39;s the best property setting for your use case in this annotation could be confusing if you don&#39;t clearly understand what transaction management key concepts are. In this series, we will talk about the key concepts in transaction management that could be configured through the <code>@Transactional</code> annotation. This article focuses on the propagation type.</p>
</div><article><h2>
  <a id="what-is-propagation" class="anchor" aria-hidden="true" href="#what-is-propagation">
    <svg class="icon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>
  </a>What is Propagation</h2><p>Propagation describes the transactional behavior from the client when a transactional method is called. In Spring-managed transactions, there are two types of transactions -- physical and logical transactions. The physical transaction is always the outer transaction while the logical transaction is the inner transaction that is mapped to the physical transaction based on the propagation type as the transaction propagates.</p>
<h2>
  <a id="propagation-types" class="anchor" aria-hidden="true" href="#propagation-types">
    <svg class="icon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>
  </a>Propagation Types</h2><p>There are seven types of propagation that we could use for the propagation property, among which only <code>REQUIRED</code>, <code>REQUIRED_NEW</code>, and <code>NESTED</code> types guarantee a transaction will be started, so the <a href="https://leafyjava.com/articles/spring-transactional-isolation-level">isolation level</a> property will be ignored if the propagation type is not one of these three types.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Definition</th>
</tr>
</thead>
<tbody><tr>
<td><code>REQUIRED</code></td>
<td>Use the current transaction, create a new transaction and use it if no transaction exists.</td>
</tr>
<tr>
<td><code>REQUIRED_NEW</code></td>
<td>Always create a new transaction, and suspend the current transaction if it exists.</td>
</tr>
<tr>
<td><code>NESTED</code></td>
<td>Execute the transaction within a current transaction if a current transaction exists, otherwise create a new transaction and use it.</td>
</tr>
<tr>
<td><code>SUPPORTS</code></td>
<td>Use the current transaction if it exists, otherwise execute the transaction non-transactionally.</td>
</tr>
<tr>
<td><code>NOT_SUPPORTED</code></td>
<td>Execute the transaction non-transactionally, suspend the current transaction if it exists.</td>
</tr>
<tr>
<td><code>MANDATORY</code></td>
<td>Use the current transaction, throw an exception if no transaction exists.</td>
</tr>
<tr>
<td><code>NEVER</code></td>
<td>Execute the transaction non-transactionally, throw an exception if a transaction exists.</td>
</tr>
</tbody></table>
<h2>
  <a id="the-syntax" class="anchor" aria-hidden="true" href="#the-syntax">
    <svg class="icon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>
  </a>The Syntax</h2><div class="codeblock">
  <pre class="language-java"><span class="token annotation punctuation">@Transactional</span> <span class="token punctuation">(</span>propagation <span class="token operator">=</span> <span class="token class-name">Propagation</span><span class="token punctuation">.</span>SUPPORTS<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">someServiceFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// calling the repository layer.</span>
<span class="token punctuation">}</span></pre>  
</div><p>If the propagation property is not specified, the default will be <code>REQUIRED</code>.</p>
</article><h2 class="github_14b9dxr"><a target="_blank" href="https://github.com/zhenyanghua/zhenyanghua.github.io/blob/master/posts/2018/05/spring-transactional-propagation-type/index.md">Read on GitHub</a></h2></div></main></div><script type="isodata"></script>
  <script type="module" src="/index.f947002b.js"></script>
</body>
</html>

