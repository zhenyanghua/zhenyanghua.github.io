<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Zhenyang Hua</title>
  <link rel="stylesheet" href="/assets/global.374079e1.css">
<link rel="stylesheet" href="/assets/style.module.184703f0.css"></head>
<body><div id="contentcontainer" class="shadow"><div class="host_1vq48fc" style="background-color: rgb(25, 232, 106);"><header><div class="host_1q8y6om"><a href="#maincontent">skip to main content</a></div><div class="host_216t9o"><h2 class="title_216t9o"><a href="/">Zhenyang Hua</a></h2></div><div class="host_m2uvri"><nav><h2 class="hidden">Main Navigation</h2><ul><li><a href="/" class="link_m2uvri">Tools</a></li><li><a href="/writings/1" class="link_m2uvri">Writings</a></li></ul></nav></div><div class="host_1c336ft"><span>This is a space that holds a collection of my personal work and ideas</span></div></header></div><main id="maincontent"><div class="post_14b9dxr"><h1 class="title_14b9dxr">Spring @Transactional - Isolation Level</h1><p class="date_14b9dxr">Posted on 05/04/2018</p><div class="summary_14b9dxr"><p>Spring <code>@Transactional</code> annotation is concise and powerful. To understand what&#39;s the best property setting for your use case in this annotation could be confusing if you don&#39;t clearly understand what transaction management key concepts are. In this series, we will talk about the key concepts in transaction management that could be configured through the <code>@Transactional</code> annotation. This article focuses on the isolation level and its side effects.</p>
</div><article><h2>
  <a id="what-is-isolation" class="anchor" aria-hidden="true" href="#what-is-isolation">
    <svg class="icon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>
  </a>What is Isolation</h2><p>Isolation defines the rules how one running transaction interacts with other concurrently running transactions. The higher the isolation level, the lower the concurrency is. In other words, the higher isolation level, the slower performance is. On the other hand, the lower isolation, the more side effects it comes with. To understand each isolation level and its side effects helps to find the right isolation for your specific use case.</p>
<h2>
  <a id="isolation-levels-and-its-side-effects" class="anchor" aria-hidden="true" href="#isolation-levels-and-its-side-effects">
    <svg class="icon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>
  </a>Isolation Levels and Its Side Effects</h2><p>There are four isolation levels that are implemented by Spring, and they also represent the common isolation levels are needed for most application use cases.  From the most isolated to the least isolated, they are <code>SERIALIZABLE</code>, <code>REPEATABLE_READ</code>, <code>READ_COMMITTED</code>, <code>READ_UNCOMMITTED</code>.</p>
<table>
<thead>
<tr>
<th>Concurrency</th>
<th>Isolcation Level</th>
<th>SideEffects</th>
<th>Consistency</th>
</tr>
</thead>
<tbody><tr>
<td>Lowest</td>
<td><code>SERIALIZABLE</code></td>
<td>None</td>
<td>Highest</td>
</tr>
<tr>
<td>Low</td>
<td><code>REPEATABLE_READ</code></td>
<td>Phantom Reads</td>
<td>High</td>
</tr>
<tr>
<td>High</td>
<td><code>READ_COMMITTED</code></td>
<td>Non-repeatable Reads, Phantom Reads</td>
<td>Low</td>
</tr>
<tr>
<td>Highest</td>
<td><code>READ_UNCOMMITTED</code></td>
<td>Dirty Reads, Non-repeatable Reads, Phantom Reads</td>
<td>Lowest</td>
</tr>
</tbody></table>
<h2>
  <a id="terms-explained" class="anchor" aria-hidden="true" href="#terms-explained">
    <svg class="icon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>
  </a>Terms Explained</h2><table>
<thead>
<tr>
<th>Term</th>
<th>Definition</th>
</tr>
</thead>
<tbody><tr>
<td><code>SERIALIZABLE</code></td>
<td>Complete Isolation - a transaction that is completely unaware of other concurrent transactions changes.</td>
</tr>
<tr>
<td><code>REPEATABLE_READ</code></td>
<td>A transaction is aware of any new rows that are inserted from other concurrent transactions. Reading such newly inserted row from other transactions in the current transaction is called a <em>phantom read</em>. By allowing reading only new reads guarantees any records can be repeatably read with consistency.</td>
</tr>
<tr>
<td><code>READ_COMMITTED</code></td>
<td>A transaction is aware of any changes that are committed in the database from other concurrent transactions. Reading the same row might return different data within the same transaction is called a <em>non-repeatable read</em>.</td>
</tr>
<tr>
<td><code>READ_UNCOMMITTED</code></td>
<td>No isolation at all - A transaction is aware of all changes that happen in other concurrent transactions. Reading records that could be rolled back from other concurrent transactions is called a <em>dirty read</em>. In other words, reading any tentative data is a form of <em>dirty read</em>.</td>
</tr>
</tbody></table>
<h2>
  <a id="the-syntax" class="anchor" aria-hidden="true" href="#the-syntax">
    <svg class="icon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>
  </a>The Syntax</h2><div class="codeblock">
  <pre class="language-java"><span class="token annotation punctuation">@Transactional</span> <span class="token punctuation">(</span>isolation <span class="token operator">=</span> <span class="token class-name">Isolation</span><span class="token punctuation">.</span>READ_COMMITTED<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">someServiceFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// calling the repository layer.</span>
<span class="token punctuation">}</span></pre>  
</div><p>If the isolation property is not specified, the default isolation level of the underlying datastore will be used.</p>
</article><h2 class="github_14b9dxr"><a target="_blank" href="https://github.com/zhenyanghua/zhenyanghua.github.io/blob/master/posts/2018/05/spring-transactional-isolation-level/index.md">Read on GitHub</a></h2></div></main></div><script type="isodata"></script>
  <script type="module" src="/index.a0be468a.js"></script>
</body>
</html>

