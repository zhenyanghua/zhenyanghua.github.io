<!DOCTYPE html>
<html lang="en">
<head><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WQ9YVRG232"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-WQ9YVRG232');
</script>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="description" content="The State Pattern allows an object to alter its behavior when its internal state changes. It tremendously reduces the complexity when introducing more states later to the object. In this exercise, we will use the State Pattern to create a modern vending machine to understand the components of the State Pattern.</p>
">
<title>Behavioral Patterns - State Pattern Exercise - Zhenyang Hua</title>
  <link rel="stylesheet" href="/assets/global.c9414973.css">
<link rel="stylesheet" href="/assets/style.module.184703f0.css"></head>
<body><div id="contentcontainer" class="shadow"><div class="host_1vq48fc" style="background-color: rgb(15, 255, 90);"><header><div class="host_1q8y6om"><a href="#maincontent">skip to main content</a></div><div class="host_216t9o"><h2 class="title_216t9o"><a href="/">Zhenyang Hua</a></h2></div><div class="host_m2uvri"><nav><h2 class="hidden">Main Navigation</h2><ul><li><a href="/" class="link_m2uvri">Tools</a></li><li><a href="/writings/1" class="link_m2uvri">Writings</a></li></ul></nav></div><div class="host_1c336ft"><span>This is a space that holds a collection of my personal work and ideas</span></div></header></div><main id="maincontent"><div class="post_14b9dxr"><h1 class="title_14b9dxr">Behavioral Patterns - State Pattern Exercise</h1><p class="date_14b9dxr">Posted on 06/26/2018</p><div class="summary_14b9dxr"><p>The State Pattern allows an object to alter its behavior when its internal state changes. It tremendously reduces the complexity when introducing more states later to the object. In this exercise, we will use the State Pattern to create a modern vending machine to understand the components of the State Pattern.</p>
</div><article><h2>
  <a id="reading-materials" class="anchor" aria-hidden="true" href="#reading-materials">
    <svg class="icon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>
  </a>Reading Materials</h2><ol>
<li><a target="_blank" href="https://en.wikipedia.org/wiki/State_pattern"><i class="external alternate icon"></i> https://en.wikipedia.org/wiki/State_pattern</a> (10 minutes reading)</li>
</ol>
<h2>
  <a id="practice-materials" class="anchor" aria-hidden="true" href="#practice-materials">
    <svg class="icon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>
  </a>Practice Materials</h2><ol>
<li>Use the <strong>State Pattern</strong> to create a modern vending machine that does the following things:</li>
</ol>
<ul>
<li>It sells different kinds of fruit</li>
<li>It has the following states:<ul>
<li>card swiped accepted</li>
<li>card swiped rejected</li>
<li>item selected</li>
<li>sold</li>
<li>sold out</li>
</ul>
</li>
<li>each state has the following operations<ul>
<li>swipe card</li>
<li>select item</li>
<li>confirm</li>
<li>cancel</li>
<li>dispense</li>
</ul>
</li>
</ul>
<h3>
  <a id="components-" class="anchor" aria-hidden="true" href="#components-">
    <svg class="icon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>
  </a>Components:</h3><ol>
<li>Vending Machine (The state machine that has multiple states) - <code>VendingMachine</code></li>
<li>State (The interface that defines all operations that each state should have) - <code>State</code></li>
<li>Concrete States (All possible states of the vending machine) - <code>CardSwipedAcceptedState</code>, <code>CardSwipedRejectedState</code>, <code>ItemSelectedState</code>, <code>SoldState</code>, <code>SoldOutState</code>.</li>
<li>Client (The user who uses the vending machine) - <code>App</code></li>
</ol>
<h3>
  <a id="tips" class="anchor" aria-hidden="true" href="#tips">
    <svg class="icon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>
  </a>Tips</h3><ul>
<li>A key-value pair like data structure could be used to keep track of the inventory of the vending machine.</li>
<li>The state machine needs to keep its internal state.</li>
<li>some mock helper methods could be used to print out generic invalid operation errors and validate cards.</li>
</ul>
<h3>
  <a id="solution" class="anchor" aria-hidden="true" href="#solution">
    <svg class="icon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>
  </a>Solution</h3><p><a target="_blank" href="https://github.com/zhenyanghua/design-patterns/tree/master/StatePatternExample/src/main/java"><i class="external alternate icon"></i> Vending Machine Example</a></p>
<h2>
  <a id="questions-to-discuss" class="anchor" aria-hidden="true" href="#questions-to-discuss">
    <svg class="icon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>
  </a>Questions to discuss</h2><ol>
<li>What are the common use cases to apply a <strong>State Pattern</strong>?</li>
<li>What needs to be done if multiple instances of the vending machine are instantiated?<ul>
<li>move concrete state instances to shared static instances.</li>
<li>instead of passing in an instance of vending machine from the state constructor, passing the reference when each state operation is called.</li>
</ul>
</li>
</ol>
</article><h2 class="github_14b9dxr"><a target="_blank" href="https://github.com/zhenyanghua/zhenyanghua.github.io/blob/master/posts/2018/06/behavioral-patterns-state-pattern-exercise/index.md">Read on GitHub</a></h2></div></main></div><script type="isodata"></script>
  <script type="module" src="/index.2414a50b.js"></script>
</body>
</html>

